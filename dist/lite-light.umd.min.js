(function(h,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(h=typeof globalThis<"u"?globalThis:h||self,u(h.LiteLight={}))})(this,function(h){"use strict";const u={};let n={startX:0,startY:0,endX:0,endY:0,initialDistance:0,isZooming:!1,lastCenterX:0,lastCenterY:0},t={scale:1,x:0,y:0,initialScale:1,initialX:0,initialY:0};const E=.01,y=1,D=5;function f(e){return u[e]||(u[e]=new Image,u[e].src=e),u[e]}let b=0;function I(){b=window.scrollY,document.body.style.position="fixed",document.body.style.top=`-${b}px`,document.body.style.width="100%",document.body.style.overflowY="scroll"}function Z(){document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflowY="",window.scrollTo({top:b,left:0,behavior:"instant"})}function Y(e){if(e.length<2)return 0;const l=e[0],o=e[1];return Math.sqrt(Math.pow(o.screenX-l.screenX,2)+Math.pow(o.screenY-l.screenY,2))}function X(e){if(e.length<2)return{x:e[0].screenX,y:e[0].screenY};const l=e[0],o=e[1];return{x:(l.screenX+o.screenX)/2,y:(l.screenY+o.screenY)/2}}function p(e){e.style.transform=`scale(${t.scale}) translate(${t.x}px, ${t.y}px)`,e.style.transformOrigin="center center"}function A(e){t.scale=1,t.x=0,t.y=0,p(e)}function w(e){return Math.abs(e-1)<E}function C(e={}){const l={imageSelector:e.imageSelector||"img[data-lightbox]",imageUrlAttribute:e.imageUrlAttribute||"data-lightbox",lightboxClass:e.lightboxClass||"lite-light",swipeThreshold:e.swipeThreshold||50,fadeAnimationDuration:e.fadeAnimationDuration||150,...e};document.querySelector(`.${l.lightboxClass}`)||k(l.lightboxClass);const o=document.querySelector(`.${l.lightboxClass}`),c=o.querySelector("img"),U=o.querySelector(".lite-light-prev"),q=o.querySelector(".lite-light-next"),$=o.querySelector(".lite-light-close");document.addEventListener("click",v=>{if(v.target.tagName!=="IMG"||!v.target.hasAttribute(l.imageUrlAttribute))return;const r=Array.from(document.querySelectorAll(l.imageSelector));let d=r.findIndex(i=>i===v.target);function S(i){const a=(i-1+r.length)%r.length,s=(i+1)%r.length;f(r[a].getAttribute(l.imageUrlAttribute)),f(r[s].getAttribute(l.imageUrlAttribute))}function m(i){d=(i+r.length)%r.length;const a=r[d].getAttribute(l.imageUrlAttribute);f(a),c.classList.add("lite-light-fade-out"),c.addEventListener("animationend",function s(){c.src=a,A(c),c.classList.remove("lite-light-fade-out"),c.classList.add("lite-light-fade-in"),S(d),c.addEventListener("animationend",function(){c.classList.remove("lite-light-fade-in")},{once:!0}),c.removeEventListener("animationend",s)},{once:!0})}function P(i){const a=i.touches;if(a.length===1){const s=a[0];n.startX=s.screenX,n.startY=s.screenY,n.lastCenterX=s.screenX,n.lastCenterY=s.screenY,n.isZooming=!1,t.initialScale=t.scale,t.initialX=t.x,t.initialY=t.y}else if(a.length===2){n.initialDistance=Y(a);const s=X(a);n.lastCenterX=s.x,n.lastCenterY=s.y,t.initialScale=t.scale,t.initialX=t.x,t.initialY=t.y,n.isZooming=!0}}function B(i){const a=i.touches;if(a.length===2){const s=Y(a),g=X(a);if(n.initialDistance>0){const L=s/n.initialDistance;if(t.scale=Math.max(y,Math.min(D,t.initialScale*L)),w(t.scale))t.x=0,t.y=0;else{const j=g.x-n.lastCenterX,H=g.y-n.lastCenterY;t.scale>y&&(t.x=t.initialX+j/t.scale,t.y=t.initialY+H/t.scale)}p(c)}n.lastCenterX=g.x,n.lastCenterY=g.y,n.isZooming=!0}else if(a.length===1&&t.scale>y){const s=a[0],g=s.screenX-n.lastCenterX,L=s.screenY-n.lastCenterY;t.x+=g/t.scale,t.y+=L/t.scale,p(c),n.lastCenterX=s.screenX,n.lastCenterY=s.screenY,n.isZooming=!0}}function N(i){if(i.changedTouches.length===1&&!n.isZooming&&i.touches.length===0&&w(t.scale)){const a=i.changedTouches[0];n.endX=a.screenX,n.endY=a.screenY;const s=n.endX-n.startX,g=n.endY-n.startY;Math.abs(s)>Math.abs(g)&&Math.abs(s)>l.swipeThreshold&&(m(s>0?d-1:d+1),i.stopPropagation())}i.touches.length===0&&(n.isZooming=!1,n.initialDistance=0)}function M(i){switch(i.key){case"ArrowLeft":m(d-1),i.preventDefault();break;case"ArrowRight":m(d+1),i.preventDefault();break;case"Escape":x(),i.preventDefault();break}}function x(){o.style.display="none",Z(),document.removeEventListener("keydown",M)}function T(i){return a=>{a.stopPropagation(),m(d+i)}}o.style.display="flex",f(r[d].getAttribute(l.imageUrlAttribute)),S(d),c.src=r[d].getAttribute(l.imageUrlAttribute),A(c),c.classList.add("lite-light-fade-in"),I(),c.addEventListener("animationend",()=>{c.classList.remove("lite-light-fade-in")},{once:!0}),o.addEventListener("touchstart",P,{passive:!0}),o.addEventListener("touchmove",B,{passive:!0}),o.addEventListener("touchend",N,{passive:!0}),document.addEventListener("keydown",M),U.addEventListener("click",T(-1)),q.addEventListener("click",T(1)),$.addEventListener("click",i=>{i.stopImmediatePropagation(),x()}),o.addEventListener("click",i=>{i.stopImmediatePropagation(),x()})})}function k(e){const l=`
    <div class="${e}">
      <div class="lite-light-prev lite-light-button">
        <span class="lite-light-arrow lite-light-left"></span>
      </div>
      <img style="max-width: 90%; max-height: 90%;" />
      <div class="lite-light-next lite-light-button">
        <span class="lite-light-arrow lite-light-right"></span>
      </div>
      <div class="lite-light-close lite-light-button">
        <span class="lite-light-bar"></span>
        <span class="lite-light-bar"></span>
      </div>
    </div>
  `;document.body.insertAdjacentHTML("beforeend",l)}function O(e){C(e)}h.init=O,h.initLiteLight=C,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
