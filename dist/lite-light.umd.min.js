(function(h,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(h=typeof globalThis<"u"?globalThis:h||self,u(h.LiteLight={}))})(this,function(h){"use strict";const u={};let n={startX:0,startY:0,endX:0,endY:0,initialDistance:0,isZooming:!1,lastCenterX:0,lastCenterY:0},e={scale:1,x:0,y:0,initialScale:1,initialX:0,initialY:0};const T=.01,y=1,E=5;function f(t){return u[t]||(u[t]=new Image,u[t].src=t),u[t]}function D(){const t=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${t}px`,document.body.style.width="100%",document.body.style.overflowY="scroll"}function I(){const t=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflowY="",window.scrollTo(0,parseInt(t||"0")*-1)}function Y(t){if(t.length<2)return 0;const l=t[0],o=t[1];return Math.sqrt(Math.pow(o.screenX-l.screenX,2)+Math.pow(o.screenY-l.screenY,2))}function L(t){if(t.length<2)return{x:t[0].screenX,y:t[0].screenY};const l=t[0],o=t[1];return{x:(l.screenX+o.screenX)/2,y:(l.screenY+o.screenY)/2}}function b(t){t.style.transform=`scale(${e.scale}) translate(${e.x}px, ${e.y}px)`,t.style.transformOrigin="center center"}function X(t){e.scale=1,e.x=0,e.y=0,b(t)}function A(t){return Math.abs(t-1)<T}function w(t={}){const l={imageSelector:t.imageSelector||"img[data-lightbox]",imageUrlAttribute:t.imageUrlAttribute||"data-lightbox",lightboxClass:t.lightboxClass||"lite-light",swipeThreshold:t.swipeThreshold||50,fadeAnimationDuration:t.fadeAnimationDuration||150,...t};document.querySelector(`.${l.lightboxClass}`)||Z(l.lightboxClass);const o=document.querySelector(`.${l.lightboxClass}`),c=o.querySelector("img"),O=o.querySelector(".lite-light-prev"),U=o.querySelector(".lite-light-next"),q=o.querySelector(".lite-light-close");document.addEventListener("click",p=>{if(p.target.tagName!=="IMG"||!p.target.hasAttribute(l.imageUrlAttribute))return;const r=Array.from(document.querySelectorAll(l.imageSelector));let d=r.findIndex(i=>i===p.target);function C(i){const a=(i-1+r.length)%r.length,s=(i+1)%r.length;f(r[a].getAttribute(l.imageUrlAttribute)),f(r[s].getAttribute(l.imageUrlAttribute))}function m(i){d=(i+r.length)%r.length;const a=r[d].getAttribute(l.imageUrlAttribute);f(a),c.classList.add("lite-light-fade-out"),c.addEventListener("animationend",function s(){c.src=a,X(c),c.classList.remove("lite-light-fade-out"),c.classList.add("lite-light-fade-in"),C(d),c.addEventListener("animationend",function(){c.classList.remove("lite-light-fade-in")},{once:!0}),c.removeEventListener("animationend",s)},{once:!0})}function $(i){const a=i.touches;if(a.length===1){const s=a[0];n.startX=s.screenX,n.startY=s.screenY,n.lastCenterX=s.screenX,n.lastCenterY=s.screenY,n.isZooming=!1,e.initialScale=e.scale,e.initialX=e.x,e.initialY=e.y}else if(a.length===2){n.initialDistance=Y(a);const s=L(a);n.lastCenterX=s.x,n.lastCenterY=s.y,e.initialScale=e.scale,e.initialX=e.x,e.initialY=e.y,n.isZooming=!0}}function B(i){const a=i.touches;if(a.length===2){const s=Y(a),g=L(a);if(n.initialDistance>0){const x=s/n.initialDistance;if(e.scale=Math.max(y,Math.min(E,e.initialScale*x)),A(e.scale))e.x=0,e.y=0;else{const j=g.x-n.lastCenterX,H=g.y-n.lastCenterY;e.scale>y&&(e.x=e.initialX+j/e.scale,e.y=e.initialY+H/e.scale)}b(c)}n.lastCenterX=g.x,n.lastCenterY=g.y,n.isZooming=!0}else if(a.length===1&&e.scale>y){const s=a[0],g=s.screenX-n.lastCenterX,x=s.screenY-n.lastCenterY;e.x+=g/e.scale,e.y+=x/e.scale,b(c),n.lastCenterX=s.screenX,n.lastCenterY=s.screenY,n.isZooming=!0}}function N(i){if(i.changedTouches.length===1&&!n.isZooming&&i.touches.length===0&&A(e.scale)){const a=i.changedTouches[0];n.endX=a.screenX,n.endY=a.screenY;const s=n.endX-n.startX,g=n.endY-n.startY;Math.abs(s)>Math.abs(g)&&Math.abs(s)>l.swipeThreshold&&(m(s>0?d-1:d+1),i.stopPropagation())}i.touches.length===0&&(n.isZooming=!1,n.initialDistance=0)}function S(i){switch(i.key){case"ArrowLeft":m(d-1),i.preventDefault();break;case"ArrowRight":m(d+1),i.preventDefault();break;case"Escape":v(),i.preventDefault();break}}function v(){o.style.display="none",I(),document.removeEventListener("keydown",S)}function M(i){return a=>{a.stopPropagation(),m(d+i)}}o.style.display="flex",f(r[d].getAttribute(l.imageUrlAttribute)),C(d),c.src=r[d].getAttribute(l.imageUrlAttribute),X(c),c.classList.add("lite-light-fade-in"),D(),c.addEventListener("animationend",()=>{c.classList.remove("lite-light-fade-in")},{once:!0}),o.addEventListener("touchstart",$,{passive:!0}),o.addEventListener("touchmove",B,{passive:!0}),o.addEventListener("touchend",N,{passive:!0}),document.addEventListener("keydown",S),O.addEventListener("click",M(-1)),U.addEventListener("click",M(1)),q.addEventListener("click",i=>{i.stopPropagation(),v()}),o.addEventListener("click",v)})}function Z(t){const l=`
    <div class="${t}">
      <div class="lite-light-prev lite-light-button">
        <span class="lite-light-arrow lite-light-left"></span>
      </div>
      <img style="max-width: 90%; max-height: 90%;" />
      <div class="lite-light-next lite-light-button">
        <span class="lite-light-arrow lite-light-right"></span>
      </div>
      <div class="lite-light-close lite-light-button">
        <span class="lite-light-bar"></span>
        <span class="lite-light-bar"></span>
      </div>
    </div>
  `;document.body.insertAdjacentHTML("beforeend",l)}function k(t){w(t)}h.init=k,h.initLiteLight=w,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
